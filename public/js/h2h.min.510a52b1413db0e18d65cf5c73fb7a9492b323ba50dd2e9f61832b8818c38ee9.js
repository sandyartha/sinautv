am4core.addLicense("ch-custom-attribution");var link=document.createElement("link");link.href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;900&display=swap",link.rel="stylesheet",document.head.appendChild(link),fetch("/h2h.json").then(e=>e.json()).then(e=>{var n=Object.keys(e),t=0;function s(){t<Object.keys(e).length?(chart.data=e[Object.keys(e)[t]],t++):clearInterval(interval)}am4core.ready(function(){am4core.useTheme(am4themes_animated);var o,i,a,r,c,l,d,u,h,m,f,p,g,j,s=am4core.create("chartdiv",am4charts.XYChart);s.padding(40,40,40,40),s.svgContainer.width=1080,s.svgContainer.height=720,s.fontFamily="Rubik",s.background.fill=am4core.color("rgba(0, 0, 0, 0)"),s.marginTop=20,s.marginRight=20,s.marginBottom=20,s.marginLeft=20,s.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"}],a=s.plotContainer.createChild(am4core.Label),a.x=am4core.percent(100),a.y=am4core.percent(88),a.horizontalCenter="right",a.verticalCenter="middle",a.dx=-0,a.fontSize=25,a.opacity=.5,a.className="chart-label",p=s.plotContainer.createChild(am4core.PlayButton),p.x=am4core.percent(97),p.y=am4core.percent(95),p.dy=-2,p.verticalCenter="middle",p.disabled=!0,m=12e4/n.length,i=s.yAxes.push(new am4charts.CategoryAxis),i.renderer.grid.template.location=0,i.dataFields.category="short_name",i.renderer.minGridDistance=1,i.renderer.inversed=!0,i.renderer.grid.template.disabled=!0,i.renderer.labels.template.padding(10,10,10,10),i.renderer.marginLeft=-40,i.renderer.labels.template.fontSize=20,i.renderer.labels.template.fontWeight=600,h=s.xAxes.push(new am4charts.ValueAxis),h.min=0,h.rangeChangeEasing=am4core.ease.linear,h.rangeChangeDuration=m,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?h.extraMax=.1:h.extraMax=.1}),o=s.series.push(new am4charts.ColumnSeries),o.dataFields.categoryY="short_name",o.dataFields.valueX="poin",o.tooltipText="{valueX.value}",o.columns.template.strokeOpacity=0,o.columns.template.column.cornerRadiusBottomRight=5,o.columns.template.column.cornerRadiusTopRight=5,o.interpolationDuration=m,o.interpolationEasing=am4core.ease.linear,o.columns.template.maxWidth=10,l=o.bullets.push(new am4charts.LabelBullet),l.label.horizontalCenter="right",l.label.text="{valueX.formatNumber('#')}",l.label.textAlign="end",l.label.dx=-10,l.label.fill=am4core.color("#FFFFFF"),l.label.fontSize=25,u=l.createChild(am4core.Image),u.horizontalCenter="left",u.verticalCenter="middle",u.propertyFields.href="logo",u.dx=5,u.height=60,j={INT:{color:"#000000",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/FC_Internazionale_Milano_2021.svg/800px-FC_Internazionale_Milano_2021.svg.png"},MIL:{color:"#FFFFFF",logo:"https://example.com/logo/milan.png"},DRAW:{color:"#333333",logo:"https://example.com/logo/draw.png"}},o.columns.template.adapter.add("fill",function(e,t){var n=t.dataItem.categoryY;return j[n]?.color||e});function _(e,t){return e.map(e=>{const n=t[e.short_name]||{};return{...e,color:n.color||"#CCCCCC",logo:n.logo||""}})}o.defaultState.transitionDuration=0,o.hiddenState.transitionDuration=0,l.label.text="",o.columns.template.hiddenState.properties.opacity=1,o.columns.template.hiddenState.properties.visible=!0,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?(o.columns.template.maxWidth=5,o.columns.template.height=50,l.label.fontSize=20,u.height=55,v(),a.hide(),c.hide(),r.hide()):(o.columns.template.maxWidth=10,u.height=60,i.zoom({start:0,end:1}),a.show(),c.show(),r.show())});function v(){var e=s.data.filter(e=>e.poin>0).length;i.zoom({start:0,end:e/i.dataItems.length})}l.label.adapter.add("text",function(e,t){return t.dataItem?Math.round(t.dataItem.valueX).toString():e}),f=n[t],a.text=f,document.getElementById("yearDiv").innerText=f,c=s.plotContainer.createChild(am4core.Label),c.x=am4core.percent(100),c.y=am4core.percent(91),c.horizontalCenter="right",c.verticalCenter="middle",c.dx=-0,c.fontSize=20,c.dy=10,c.opacity=.5,c.className="chart-label",r=s.plotContainer.createChild(am4core.Label),r.x=am4core.percent(100),r.y=am4core.percent(94),r.horizontalCenter="right",r.verticalCenter="middle",r.dx=-0,r.fontSize=20,r.dy=20,r.opacity=.5,r.className="chart-label";function y(){g=setInterval(function(){b()},m),b()}function w(){g&&clearInterval(g)}function b(){if(t++,t>=n.length)return;for(var d,u,l=e[n[t]],p=1,i=0;i<s.data.length;i++)s.data[i].poin=l[i].poin,s.data[i].poin>0&&p++;t>36?(o.interpolationDuration=m*4,h.rangeChangeDuration=m*4):(o.interpolationDuration=m,h.rangeChangeDuration=m),s.invalidateRawData(),f=n[t],a.text=f,document.getElementById("yearDiv").innerText=f,d=l.map(e=>e.league||"").join(" "),c.text=d,document.getElementById("leagueDiv").innerText=d,u=l.filter(e=>e.score).map(e=>"Score: "+e.score).join(" "),r.text=u,document.getElementById("scoreDiv").innerText=u,v(),console.log("Year:",f),console.log("Chart Data:",s.data)}i.sortBySeries=o,s.data=JSON.parse(JSON.stringify(e[n[t]])),i.zoom({start:0,end:1}),console.log("Initial Chart Data:",s.data),s.zoomOutButton.disabled=!0,o.events.on("inited",function(){setTimeout(function(){y()},2e3)}),i.events.on("datavalidated",function(){v()}),d=s.plotContainer.createChild(am4core.Label),d.text="dango ball",d.fontSize=15,d.align="right",d.valign="top",d.opacity=.2,d.dx=-10,d.dy=10,d.fill=am4core.color("#000000")})}).catch(e=>console.error("Error loading data:",e))