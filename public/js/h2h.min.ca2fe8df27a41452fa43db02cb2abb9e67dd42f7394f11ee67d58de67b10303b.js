am4core.addLicense("ch-custom-attribution");var link=document.createElement("link");link.href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;900&display=swap",link.rel="stylesheet",document.head.appendChild(link),fetch("/h2h.json").then(e=>e.json()).then(e=>{var n=Object.keys(e),t=0;function s(){t<Object.keys(e).length?(chart.data=e[Object.keys(e)[t]],t++):clearInterval(interval)}am4core.ready(function(){am4core.useTheme(am4themes_animated);var o,i,a,r,c,l,d,u,h,m,f,p,v,b,s=am4core.create("chartdiv",am4charts.XYChart);s.padding(40,40,40,40),s.svgContainer.width=1080,s.svgContainer.height=720,s.fontFamily="Rubik",s.background.fill=am4core.color("rgba(0, 0, 0, 0)"),s.marginTop=20,s.marginRight=20,s.marginBottom=20,s.marginLeft=20,s.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"}],r=s.plotContainer.createChild(am4core.Label),r.x=am4core.percent(100),r.y=am4core.percent(88),r.horizontalCenter="right",r.verticalCenter="middle",r.dx=-0,r.fontSize=25,r.opacity=.5,r.className="chart-label",p=s.plotContainer.createChild(am4core.PlayButton),p.x=am4core.percent(97),p.y=am4core.percent(95),p.dy=-2,p.verticalCenter="middle",p.disabled=!0,u=3e4/n.length,i=s.yAxes.push(new am4charts.CategoryAxis),i.renderer.grid.template.location=0,i.dataFields.category="short_name",i.renderer.minGridDistance=1,i.renderer.inversed=!0,i.renderer.grid.template.disabled=!0,i.renderer.labels.template.padding(10,10,10,10),i.renderer.marginLeft=-40,i.renderer.labels.template.fontSize=20,i.renderer.labels.template.fontWeight=600,f=s.xAxes.push(new am4charts.ValueAxis),f.min=0,f.rangeChangeEasing=am4core.ease.linear,f.rangeChangeDuration=u,f.extraMax=.2,o=s.series.push(new am4charts.ColumnSeries),o.dataFields.categoryY="short_name",o.dataFields.valueX="poin",o.tooltipText="{valueX.value}",o.columns.template.strokeOpacity=0,o.columns.template.column.cornerRadiusBottomRight=5,o.columns.template.column.cornerRadiusTopRight=5,o.interpolationDuration=u,o.interpolationEasing=am4core.ease.linear,o.columns.template.maxWidth=10,l=o.bullets.push(new am4charts.LabelBullet),l.label.horizontalCenter="right",l.label.text="{valueX.formatNumber('#')}",l.label.textAlign="end",l.label.dx=-10,l.label.fill=am4core.color("#FFFFFF"),l.label.fontSize=25,h=l.createChild(am4core.Image),h.horizontalCenter="left",h.verticalCenter="middle",h.propertyFields.href="logo",h.dx=5,h.height=60,b={LIV:"#c8102E",CHE:"#034694"},o.columns.template.adapter.add("fill",function(e,t){var n=t.dataItem.categoryY;return b[n]||e}),o.defaultState.transitionDuration=0,o.hiddenState.transitionDuration=0,l.label.text="",o.columns.template.hiddenState.properties.opacity=1,o.columns.template.hiddenState.properties.visible=!0,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?(o.columns.template.maxWidth=5,o.columns.template.height=50,l.label.fontSize=20,h.height=55,g(),r.hide(),a.hide(),c.hide()):(o.columns.template.maxWidth=10,h.height=60,i.zoom({start:0,end:1}),r.show(),a.show(),c.show())});function g(){var e=s.data.filter(e=>e.poin>0).length;i.zoom({start:0,end:e/i.dataItems.length})}l.label.adapter.add("text",function(e,t){return t.dataItem?Math.round(t.dataItem.valueX).toString():e}),m=n[t],r.text=m,document.getElementById("yearDiv").innerText=m,a=s.plotContainer.createChild(am4core.Label),a.x=am4core.percent(100),a.y=am4core.percent(91),a.horizontalCenter="right",a.verticalCenter="middle",a.dx=-0,a.fontSize=20,a.dy=10,a.opacity=.5,a.className="chart-label",c=s.plotContainer.createChild(am4core.Label),c.x=am4core.percent(100),c.y=am4core.percent(94),c.horizontalCenter="right",c.verticalCenter="middle",c.dx=-0,c.fontSize=20,c.dy=20,c.opacity=.5,c.className="chart-label";function y(){v=setInterval(function(){j()},u),j()}function _(){v&&clearInterval(v)}function j(){if(t++,t>=n.length)return;for(var d,h,l=e[n[t]],p=1,i=0;i<s.data.length;i++)s.data[i].poin=l[i].poin,s.data[i].poin>0&&p++;t>36?(o.interpolationDuration=u*4,f.rangeChangeDuration=u*4):(o.interpolationDuration=u,f.rangeChangeDuration=u),s.invalidateRawData(),m=n[t],r.text=m,document.getElementById("yearDiv").innerText=m,d=l.map(e=>e.league||"").join(" "),a.text=d,document.getElementById("leagueDiv").innerText=d,h=l.filter(e=>e.score).map(e=>"Score: "+e.score).join(" "),c.text=h,document.getElementById("scoreDiv").innerText=h,g(),console.log("Year:",m),console.log("Chart Data:",s.data)}i.sortBySeries=o,s.data=JSON.parse(JSON.stringify(e[n[t]])),i.zoom({start:0,end:1}),console.log("Initial Chart Data:",s.data),s.zoomOutButton.disabled=!0,o.events.on("inited",function(){setTimeout(function(){y()},2e3)}),i.events.on("datavalidated",function(){g()}),d=s.plotContainer.createChild(am4core.Label),d.text="dango ball",d.fontSize=15,d.align="right",d.valign="top",d.opacity=.2,d.dx=-10,d.dy=10,d.fill=am4core.color("#000000")})}).catch(e=>console.error("Error loading data:",e))