am4core.addLicense("ch-custom-attribution");var link=document.createElement("link");link.href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;900&display=swap",link.rel="stylesheet",document.head.appendChild(link),fetch("/h2h.json").then(e=>e.json()).then(e=>{var n=Object.keys(e),t=0;function s(){t<Object.keys(e).length?(chart.data=e[Object.keys(e)[t]],t++):clearInterval(interval)}am4core.ready(function(){am4core.useTheme(am4themes_animated);var o,i,a,r,c,l,d,u,h,m,f,p,g,v,s=am4core.create("chartdiv",am4charts.XYChart);s.padding(40,40,40,40),s.svgContainer.width=1080,s.svgContainer.height=720,s.fontFamily="Rubik",s.background.fill=am4core.color("rgba(0, 0, 0, 0)"),s.marginTop=20,s.marginRight=20,s.marginBottom=20,s.marginLeft=20,s.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"}],r=s.plotContainer.createChild(am4core.Label),r.x=am4core.percent(100),r.y=am4core.percent(88),r.horizontalCenter="right",r.verticalCenter="middle",r.dx=-0,r.fontSize=25,r.opacity=.5,r.className="chart-label",g=s.plotContainer.createChild(am4core.PlayButton),g.x=am4core.percent(97),g.y=am4core.percent(95),g.dy=-2,g.verticalCenter="middle",g.disabled=!0,p=12e4/n.length,i=s.yAxes.push(new am4charts.CategoryAxis),i.renderer.grid.template.location=0,i.dataFields.category="short_name",i.renderer.minGridDistance=1,i.renderer.inversed=!0,i.renderer.grid.template.disabled=!0,i.renderer.labels.template.padding(10,10,10,10),i.renderer.marginLeft=-40,i.renderer.labels.template.fontSize=20,i.renderer.labels.template.fontWeight=600,m=s.xAxes.push(new am4charts.ValueAxis),m.min=0,m.rangeChangeEasing=am4core.ease.linear,m.rangeChangeDuration=p,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?m.extraMax=.23:m.extraMax=.1}),o=s.series.push(new am4charts.ColumnSeries),o.dataFields.categoryY="short_name",o.dataFields.valueX="poin",o.tooltipText="{valueX.value}",o.columns.template.strokeOpacity=0,o.columns.template.column.cornerRadiusBottomRight=5,o.columns.template.column.cornerRadiusTopRight=5,o.interpolationDuration=p,o.interpolationEasing=am4core.ease.linear,o.columns.template.maxWidth=10,l=o.bullets.push(new am4charts.LabelBullet),l.label.horizontalCenter="right",l.label.text="{valueX.formatNumber('#')}",l.label.textAlign="end",l.label.dx=-10,l.label.fill=am4core.color("#FFFFFF"),l.label.fontSize=25,u=l.createChild(am4core.Image),u.horizontalCenter="left",u.verticalCenter="middle",u.propertyFields.href="logo",u.dx=5,u.height=60,h={MIL:{color:"#FF0000",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Logo_of_AC_Milan.svg/250px-Logo_of_AC_Milan.svg.png"},ROM:{color:"#A50021",logo:"https://example.com/logo/roma.png"},ATA:{color:"#003087",logo:"https://example.com/logo/atalanta.png"},BOL:{color:"#1A2F4A",logo:"https://example.com/logo/bologna.png"},CAG:{color:"#002855",logo:"https://example.com/logo/cagliari.png"},COM:{color:"#004080",logo:"https://example.com/logo/como.png"},EMP:{color:"#005566",logo:"https://example.com/logo/empoli.png"},FIO:{color:"#4B0082",logo:"https://example.com/logo/fiorentina.png"},GEN:{color:"#B30033",logo:"https://example.com/logo/genoa.png"},VER:{color:"#0047AB",logo:"https://example.com/logo/hellasverona.png"},INT:{color:"#0066CC",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/FC_Internazionale_Milano_2021.svg/800px-FC_Internazionale_Milano_2021.svg.png"},JUV:{color:"#000000",logo:"https://example.com/logo/juventus.png"},LAZ:{color:"#87CEEB",logo:"https://example.com/logo/lazio.png"},LEC:{color:"#FFD700",logo:"https://example.com/logo/lecce.png"},MON:{color:"#C40000",logo:"https://example.com/logo/monza.png"},NAP:{color:"#00B2E3",logo:"https://example.com/logo/napoli.png"},PAR:{color:"#FFFF00",logo:"https://example.com/logo/parma.png"},TOR:{color:"#8B0000",logo:"https://example.com/logo/torino.png"},UDI:{color:"#000000",logo:"https://example.com/logo/udinese.png"},VEN:{color:"#008C8C",logo:"https://example.com/logo/venezia.png"}};function _(e,t){return`
          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 495 495" style="enable-background:new 0 0 495 495;" xml:space="preserve">
          <g>
            <path style="fill:${e};" d="M0,247.5C0,384.19,110.81,495,247.5,495V0C110.81,0,0,110.81,0,247.5z"/>
            <path style="fill:${t}" d="M247.5,0v495C384.19,495,495,384.19,495,247.5S384.19,0,247.5,0z"/>
          </g>
          </svg>`}o.columns.template.adapter.add("fill",function(e,t){var n=t.dataItem.categoryY;return h[n]?.color||"#333"}),u.adapter.add("href",function(e,t){var n,i,a,r,c,l,d,o=t.dataItem.categoryY;return o==="DRAW"?(n=s.data.find(e=>e.short_name==="DRAW"),n?(i=n.clubs?.[0],a=n.clubs?.[1],r=h[i]?.color||"#000000",c=h[a]?.color||"#FFFFFF",l=_(r,c),d="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(l),d):e):h[o]?.logo||e}),o.defaultState.transitionDuration=0,o.hiddenState.transitionDuration=0,l.label.text="",o.columns.template.hiddenState.properties.opacity=1,o.columns.template.hiddenState.properties.visible=!0,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?(o.columns.template.maxWidth=5,o.columns.template.height=50,l.label.fontSize=20,u.height=55,b(),r.hide(),c.hide(),a.hide()):(o.columns.template.maxWidth=10,u.height=60,i.zoom({start:0,end:1}),r.show(),c.show(),a.show())});function b(){var e=s.data.filter(e=>e.poin>0).length;i.zoom({start:0,end:e/i.dataItems.length})}l.label.adapter.add("text",function(e,t){return t.dataItem?Math.round(t.dataItem.valueX).toString():e}),f=n[t],r.text=f,document.getElementById("yearDiv").innerText=f,c=s.plotContainer.createChild(am4core.Label),c.x=am4core.percent(100),c.y=am4core.percent(91),c.horizontalCenter="right",c.verticalCenter="middle",c.dx=-0,c.fontSize=20,c.dy=10,c.opacity=.5,c.className="chart-label",a=s.plotContainer.createChild(am4core.Label),a.x=am4core.percent(100),a.y=am4core.percent(94),a.horizontalCenter="right",a.verticalCenter="middle",a.dx=-0,a.fontSize=20,a.dy=20,a.opacity=.5,a.className="chart-label";function y(){v=setInterval(function(){j()},p),j()}function w(){v&&clearInterval(v)}function j(){if(t++,t>=n.length){clearInterval(v),console.log("Animation completed");return}var i,d,u,g,j,y,_,w,l=e[n[t]];console.log("Updating to",n[t],l);for(i=0;i<s.data.length;i++)l[i]&&s.data[i].short_name===l[i].short_name?s.data[i].poin=l[i].poin:console.warn("Mismatch in team order at index",i,s.data[i],l[i]);o.interpolationDuration=p,m.rangeChangeDuration=p,s.invalidateRawData(),f=n[t],r.text=f,document.getElementById("yearLeagueDiv").innerText=`${f}: ${leagues}`,c.text=leagues,d=l.find(e=>e.short_name==="DRAW"),d&&d.clubs&&d.result?(g=d.clubs[0],j=d.clubs[1],y=d.result,_=h[g]?.color||"#000",w=h[j]?.color||"#000",u=`
            <span style="color: ${_};">${g}</span> 
            ${y} 
            <span style="color: ${w};">${j}</span>
          `,a.html=u,document.getElementById("scoreDiv").innerHTML=u):(u=l.filter(e=>e.score!==void 0).map(e=>`${e.club_name}: ${e.score}`).join(", "),a.text=u,document.getElementById("scoreDiv").innerText=u),b(),console.log("Year:",f),console.log("Chart Data:",s.data)}i.sortBySeries=o,s.data=JSON.parse(JSON.stringify(e[n[t]])),i.zoom({start:0,end:1}),console.log("Initial Chart Data:",s.data),s.zoomOutButton.disabled=!0,o.events.on("inited",function(){setTimeout(function(){y()},2e3)}),i.events.on("datavalidated",function(){b()}),d=s.plotContainer.createChild(am4core.Label),d.text="dango ball",d.fontSize=15,d.align="right",d.valign="top",d.opacity=.2,d.dx=-10,d.dy=10,d.fill=am4core.color("#000000")})}).catch(e=>console.error("Error loading data:",e))