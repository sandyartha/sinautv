am4core.addLicense("ch-custom-attribution");var link=document.createElement("link");link.href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;900&display=swap",link.rel="stylesheet",document.head.appendChild(link),fetch("/h2h.json").then(e=>e.json()).then(e=>{var n=Object.keys(e),t=0;function s(){t<Object.keys(e).length?(chart.data=e[Object.keys(e)[t]],t++):clearInterval(interval)}am4core.ready(function(){am4core.useTheme(am4themes_animated);var o,i,a,r,c,l,d,u,h,m,f,p,g,b,s=am4core.create("chartdiv",am4charts.XYChart);s.padding(40,40,40,40),s.svgContainer.width=1080,s.svgContainer.height=720,s.fontFamily="Rubik",s.background.fill=am4core.color("rgba(0, 0, 0, 0)"),s.marginTop=20,s.marginRight=20,s.marginBottom=20,s.marginLeft=20,s.numberFormatter.bigNumberPrefixes=[{number:1e3,suffix:"k"}],r=s.plotContainer.createChild(am4core.Label),r.x=am4core.percent(100),r.y=am4core.percent(88),r.horizontalCenter="right",r.verticalCenter="middle",r.dx=-0,r.fontSize=25,r.opacity=.5,r.className="chart-label",p=s.plotContainer.createChild(am4core.PlayButton),p.x=am4core.percent(97),p.y=am4core.percent(95),p.dy=-2,p.verticalCenter="middle",p.disabled=!0,h=12e4/n.length,i=s.yAxes.push(new am4charts.CategoryAxis),i.renderer.grid.template.location=0,i.dataFields.category="short_name",i.renderer.minGridDistance=1,i.renderer.inversed=!0,i.renderer.grid.template.disabled=!0,i.renderer.labels.template.padding(10,10,10,10),i.renderer.marginLeft=-40,i.renderer.labels.template.fontSize=20,i.renderer.labels.template.fontWeight=600,m=s.xAxes.push(new am4charts.ValueAxis),m.min=0,m.rangeChangeEasing=am4core.ease.linear,m.rangeChangeDuration=h,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?m.extraMax=.1:m.extraMax=.1}),o=s.series.push(new am4charts.ColumnSeries),o.dataFields.categoryY="short_name",o.dataFields.valueX="poin",o.tooltipText="{valueX.value}",o.columns.template.strokeOpacity=0,o.columns.template.column.cornerRadiusBottomRight=5,o.columns.template.column.cornerRadiusTopRight=5,o.interpolationDuration=h,o.interpolationEasing=am4core.ease.linear,o.columns.template.maxWidth=10,l=o.bullets.push(new am4charts.LabelBullet),l.label.horizontalCenter="right",l.label.text="{valueX.formatNumber('#')}",l.label.textAlign="end",l.label.dx=-10,l.label.fill=am4core.color("#FFFFFF"),l.label.fontSize=25,d=l.createChild(am4core.Image),d.horizontalCenter="left",d.verticalCenter="middle",d.propertyFields.href="logo",d.dx=5,d.height=60,g={INT:{color:"#000000",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/FC_Internazionale_Milano_2021.svg/800px-FC_Internazionale_Milano_2021.svg.png"},MIL:{color:"#FFFFFF",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Logo_of_AC_Milan.svg/250px-Logo_of_AC_Milan.svg.png"},DRAW:{color:"#333333",logo:"/logo/draw.png"}},o.columns.template.adapter.add("fill",function(e,t){var n=t.dataItem.categoryY;return g[n]?.color||e}),d.adapter.add("href",function(e,t){var n=t.dataItem.categoryY;return g[n]?.logo||e}),o.defaultState.transitionDuration=0,o.hiddenState.transitionDuration=0,l.label.text="",o.columns.template.hiddenState.properties.opacity=1,o.columns.template.hiddenState.properties.visible=!0,s.events.on("sizechanged",function(e){e.target.pixelWidth<=480?(o.columns.template.maxWidth=5,o.columns.template.height=50,l.label.fontSize=20,d.height=55,v(),r.hide(),a.hide(),c.hide()):(o.columns.template.maxWidth=10,d.height=60,i.zoom({start:0,end:1}),r.show(),a.show(),c.show())});function v(){var e=s.data.filter(e=>e.poin>0).length;i.zoom({start:0,end:e/i.dataItems.length})}l.label.adapter.add("text",function(e,t){return t.dataItem?Math.round(t.dataItem.valueX).toString():e}),f=n[t],r.text=f,document.getElementById("yearDiv").innerText=f,a=s.plotContainer.createChild(am4core.Label),a.x=am4core.percent(100),a.y=am4core.percent(91),a.horizontalCenter="right",a.verticalCenter="middle",a.dx=-0,a.fontSize=20,a.dy=10,a.opacity=.5,a.className="chart-label",c=s.plotContainer.createChild(am4core.Label),c.x=am4core.percent(100),c.y=am4core.percent(94),c.horizontalCenter="right",c.verticalCenter="middle",c.dx=-0,c.fontSize=20,c.dy=20,c.opacity=.5,c.className="chart-label";function y(){b=setInterval(function(){j()},h),j()}function _(){b&&clearInterval(b)}function j(){if(t++,t>=n.length)return;for(var d,u,l=e[n[t]],p=1,i=0;i<s.data.length;i++)s.data[i].poin=l[i].poin,s.data[i].poin>0&&p++;t>36?(o.interpolationDuration=h*4,m.rangeChangeDuration=h*4):(o.interpolationDuration=h,m.rangeChangeDuration=h),s.invalidateRawData(),f=n[t],r.text=f,document.getElementById("yearDiv").innerText=f,d=l.map(e=>e.league||"").join(" "),a.text=d,document.getElementById("leagueDiv").innerText=d,u=l.filter(e=>e.score).map(e=>"Score: "+e.score).join(" "),c.text=u,document.getElementById("scoreDiv").innerText=u,v(),console.log("Year:",f),console.log("Chart Data:",s.data)}i.sortBySeries=o,s.data=JSON.parse(JSON.stringify(e[n[t]])),i.zoom({start:0,end:1}),console.log("Initial Chart Data:",s.data),s.zoomOutButton.disabled=!0,o.events.on("inited",function(){setTimeout(function(){y()},2e3)}),i.events.on("datavalidated",function(){v()}),u=s.plotContainer.createChild(am4core.Label),u.text="dango ball",u.fontSize=15,u.align="right",u.valign="top",u.opacity=.2,u.dx=-10,u.dy=10,u.fill=am4core.color("#000000")})}).catch(e=>console.error("Error loading data:",e))