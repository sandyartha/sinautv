<!DOCTYPE html>
<html lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

    <meta name="robots" content="noindex">
    <meta name="googlebot" content="noindex">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orange Esports vs Suhaz Esports</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    
    

    <link rel="stylesheet" href="/css/styles.min.c82db433df3100d94013d1a6964b43182516271b6e9424f8801d0c11c828f946.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

    
</head>
<body>
 	
	




<div class="chart">
	
	<style>
		.animated-title {
			animation: fadeIn 2s ease-in-out;
		}
		.animated-h2h {
			animation: fadeIn2 2s ease-in-out;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(-20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@keyframes fadeIn2 {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

	</style>
	<h1 class="animated-title">Head to Head$</h1>
	<h3 class="animated-h2h">Orange Esports ⚔️ Suhaz Esports</h3>

	


<div id="chartContainer">
  <div id="chartdiv" style="min-width: 100%;min-height:30rem;display:flex;"></div>
  

  <div id="leagueDiv"></div>
  <div id="yearDiv"></div>
  <div id="scoreDiv"></div>
</div>



<script>

am4core.addLicense("ch-custom-attribution");


var link = document.createElement("link");
link.href =
  "https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap";
link.rel = "stylesheet";
document.head.appendChild(link);



const jsonFile = "\/team-my\/orange_esports_vs_suhaz_esports.json"; 

fetch(jsonFile)
  .then((response) => response.json())
  .then((allData) => {
    var dateKeys = Object.keys(allData); 
    var currentIndex = 0; 

    
    function updateChart() {
      if (currentIndex < dateKeys.length) {
        var gameKey = dateKeys[currentIndex]; 
        var gameData = allData[gameKey]; 

        
        var teams = gameData.slice(0, 2); 
        var metadata = gameData[2]; 

        
        chart.data = teams.map((team) => ({
          short_name: team.short_name,
          poin: team.poin,
          score: team.score,
          league: metadata.league,
          clubs: metadata.clubs,
        }));

        
        year = metadata.date;
        label.text = year;
        document.getElementById("yearDiv").innerText = year;

        leagueLabel.text = metadata.league;
        document.getElementById("leagueDiv").innerText = metadata.league;

        var scores = `
          <span style="color: ${labelMapping[teams[0].short_name]?.color || "#000"};">
            ${teams[0].short_name}
          </span> 
          ${teams[0].score}:${teams[1].score} 
          <span style="color: ${labelMapping[teams[1].short_name]?.color || "#000"};">
            ${teams[1].short_name}
          </span>
        `;
        scoreLabel.html = scores;
        document.getElementById("scoreDiv").innerHTML = scores;

        
        console.log("Updating to", gameKey, chart.data);

        currentIndex++;
      } else {
        clearInterval(interval);
        console.log("Animation completed");
      }
    }

    am4core.ready(function () {
      
      am4core.useTheme(am4themes_animated);
      

      var chart = am4core.create("chartdiv", am4charts.XYChart); 
      chart.padding(40, 40, 40, 40); 
      chart.svgContainer.width = 1080; 
      chart.svgContainer.height = 720; 

      
      chart.fontFamily = "Roboto Mono";

      
      chart.background.fill = am4core.color("rgba(0, 0, 0, 0)");

      
      chart.marginTop = 20;
      chart.marginRight = 20;
      chart.marginBottom = 20;
      chart.marginLeft = 20;

      chart.numberFormatter.bigNumberPrefixes = [{ number: 1e3, suffix: "k" }]; 

      var label = chart.plotContainer.createChild(am4core.Label); 
      label.x = am4core.percent(100);
      label.y = am4core.percent(88);
      label.horizontalCenter = "right";
      label.verticalCenter = "middle";
      label.dx = -0;
      label.fontSize = 20; 
      label.opacity = 0.5; 
      label.className = "chart-label"; 
      label.fontWeight = "600"; 

      var playButton = chart.plotContainer.createChild(am4core.PlayButton); 
      playButton.x = am4core.percent(97);
      playButton.y = am4core.percent(95);
      playButton.dy = -2;
      playButton.verticalCenter = "middle";
      playButton.disabled = true; 


      var tags = parseInt("22", 10);

      var totalDuration;

      if (tags >= 100) {
        totalDuration = 45000; 
      } else if (tags >= 60) {
        totalDuration = 30000; 
      } else if (tags >= 30) {
        totalDuration = 20000; 
      } else if (tags >= 5) {
        totalDuration = 15000; 
      } else {
        totalDuration = 30000; 
      }

      
      
      

      
      var stepDuration = totalDuration / dateKeys.length;

      
      

      
      

      


      var categoryAxis = chart.yAxes.push(new am4charts.CategoryAxis()); 
      categoryAxis.renderer.grid.template.location = 0;
      categoryAxis.dataFields.category = "short_name";
      categoryAxis.renderer.minGridDistance = 10;
      categoryAxis.renderer.inversed = true;
      categoryAxis.renderer.grid.template.disabled = true;

      
      categoryAxis.renderer.labels.template.padding(5, 5, 5, 5); 
      categoryAxis.renderer.labels.template.marginRight = 0; 
      categoryAxis.renderer.labels.template.marginLeft = 15; 
      
      categoryAxis.renderer.marginLeft = -40;

      
      categoryAxis.renderer.labels.template.fontSize = 15;
      categoryAxis.renderer.labels.template.fontWeight = 600;
      
      var valueAxis = chart.xAxes.push(new am4charts.ValueAxis()); 
      valueAxis.min = 0;
      valueAxis.rangeChangeEasing = am4core.ease.linear;
      valueAxis.rangeChangeDuration = stepDuration;

      chart.events.on("sizechanged", function (ev) {
        if (ev.target.pixelWidth <= 480) {
          
          valueAxis.extraMax = 0.23; 
        } else {
          
          valueAxis.extraMax = 0.1; 
        }
      });

      
      var poinSeries = chart.series.push(new am4charts.ColumnSeries());
      poinSeries.dataFields.categoryY = "short_name";
      poinSeries.dataFields.valueX = "poin";
      poinSeries.tooltipText = "{valueX.value}";
      poinSeries.columns.template.strokeOpacity = 0;
      poinSeries.columns.template.column.cornerRadiusBottomRight = 5;
      poinSeries.columns.template.column.cornerRadiusTopRight = 5;
      poinSeries.interpolationDuration = stepDuration;
      poinSeries.interpolationEasing = am4core.ease.linear;
      poinSeries.columns.template.maxWidth = 10; 
      
      var poinLabelBullet = poinSeries.bullets.push(
        new am4charts.LabelBullet()
      );
      poinLabelBullet.label.horizontalCenter = "right";
      poinLabelBullet.label.text = "{valueX.formatNumber('#')}";
      poinLabelBullet.label.textAlign = "end";
      poinLabelBullet.label.dx = -10;
      poinLabelBullet.label.fill = am4core.color("#FFFFFF"); 
      poinLabelBullet.label.fontSize = 25; 

      var poinImage = poinLabelBullet.createChild(am4core.Image); 
      poinImage.horizontalCenter = "left";
      poinImage.verticalCenter = "middle";
      poinImage.propertyFields.href = "logo";
      poinImage.dx = 5;
      poinImage.height = 60; 

      
      
      
      
      
      
      

      
      var labelMapping = {
        AERO: {
          color: "#ff4d00", 
          logo: "/305px-Aero_Esports_allmode.png",
        },
        GEEK: {
          color: "#ec091d", 
          logo: "/Geek_Fam_2019_allmode.png",
        },
        BOIS: {
          color: "#d7a147", 
          logo: "/HomeBois_2024_allmode.png",
        },
        ORE: {
          color: "#ff7b00", 
          logo: "/600px-Orange_Esports_allmode.png",
        },
        RSG: {
          color: "#0078bb", 
          logo: "/600px-RSG_Slate_MY_allmode.png",
        },
        SRG: {
          color: "#ff0000", 
          logo: "/Selangor_Red_Giants_2024_allmode.png",
        },
        SHZ: {
          color: "#21211f", 
          logo: "/662px-Suhaz_Esports_allmode.png",
        },
        TDK: {
          color: "#3c3c3c", 
          logo: "/Todak_lightmode.png",
        },
        HAQ: {
          color: "#505050", 
          logo: "/600px-Team_HAQ_allmode.png",
        },
        SMG: {
          color: "#f61e00", 
          logo: "/Teams_team smg.avif",
        },
      };

      function generateDrawLogo(color1, color2) {
        return `
          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
             viewBox="0 0 495 495" style="enable-background:new 0 0 495 495;" xml:space="preserve">
          <g>
            <path style="fill:${color1};" d="M0,247.5C0,384.19,110.81,495,247.5,495V0C110.81,0,0,110.81,0,247.5z"/>
            <path style="fill:${color2}" d="M247.5,0v495C384.19,495,495,384.19,495,247.5S384.19,0,247.5,0z"/>
          </g>
          </svg>`;
      }

      
      poinSeries.columns.template.adapter.add("fill", function (fill, target) {
        var labelName = target.dataItem.categoryY;
        return labelMapping[labelName]?.color || "#333";
      });

      poinImage.adapter.add("href", function (href, target) {
        var labelName = target.dataItem.categoryY;

        if (labelName === "DRW") {
          
          var currentData = chart.data.find(
            (item) => item.short_name === "DRW"
          );
          if (!currentData) return href;

          
          var club1 = currentData.clubs?.[0]; 
          var club2 = currentData.clubs?.[1]; 

          
          var club1Color = labelMapping[club1]?.color || "#000000"; 
          var club2Color = labelMapping[club2]?.color || "#FFFFFF"; 

          
          var svgLogo = generateDrawLogo(club1Color, club2Color);

          
          var svgDataUrl =
            "data:image/svg+xml;charset=utf-8," + encodeURIComponent(svgLogo);

          return svgDataUrl; 
        }

        
        return labelMapping[labelName]?.logo || href;
      });

      



      
      poinSeries.defaultState.transitionDuration = 0;
      poinSeries.hiddenState.transitionDuration = 0;

      
      poinLabelBullet.label.text = "";
      poinSeries.columns.template.hiddenState.properties.opacity = 1;
      poinSeries.columns.template.hiddenState.properties.visible = true;

      
      chart.events.on("sizechanged", function (ev) {
        if (ev.target.pixelWidth <= 480) {
          poinSeries.columns.template.maxWidth = 5; 
          poinSeries.columns.template.height = 60; 
          poinLabelBullet.label.fontSize = 20; 
          poinImage.height = 55; 
          adjustZoomLevel(); 
          label.y = am4core.percent(93);

          
          leagueLabel.hide();
          label.show();
          scoreLabel.show();
        } else {
          poinSeries.columns.template.maxWidth = 10; 
          poinImage.height = 60; 
          categoryAxis.zoom({ start: 0, end: 1 }); 

          
          label.show();
          leagueLabel.hide();
          scoreLabel.show();
        }
      });

      
      function adjustZoomLevel() {
        var itemsWithNonZero = chart.data.filter(
          (item) => item.poin > 0
        ).length;
        categoryAxis.zoom({
          start: 0,
          end: itemsWithNonZero / categoryAxis.dataItems.length,
        });
      }

      
      poinLabelBullet.label.adapter.add("text", function (text, target) {
        return target.dataItem
          ? Math.round(target.dataItem.valueX).toString()
          : text;
      });

      var year = dateKeys[currentIndex]; 
      label.text = year;

      
      document.getElementById("yearDiv").innerText = year;

      var leagueLabel = chart.plotContainer.createChild(am4core.Label); 
      leagueLabel.x = am4core.percent(100);
      leagueLabel.y = am4core.percent(91);
      leagueLabel.horizontalCenter = "right";
      leagueLabel.verticalCenter = "middle";
      leagueLabel.dx = -0;
      leagueLabel.fontSize = 20; 
      leagueLabel.dy = 10; 
      leagueLabel.opacity = 0.5; 
      leagueLabel.className = "chart-label"; 

      var scoreLabel = chart.plotContainer.createChild(am4core.Label); 
      scoreLabel.x = am4core.percent(100); 
      scoreLabel.y = am4core.percent(94);
      scoreLabel.horizontalCenter = "right";
      scoreLabel.verticalCenter = "middle";
      scoreLabel.dx = -0;
      scoreLabel.fontSize = 20; 
      scoreLabel.dy = 20; 
      scoreLabel.opacity = 0.5; 
      scoreLabel.className = "chart-label"; 
      scoreLabel.fontWeight = "600"; 

      var interval; 

      
      function play() {
        interval = setInterval(function () {
          nextYear();
        }, stepDuration);
        nextYear();
      }

      
      function stop() {
        if (interval) {
          clearInterval(interval);
        }
      }

      
      function nextYear() {
        currentIndex++;

        if (currentIndex >= dateKeys.length) {
          clearInterval(interval); 
          console.log("Animation completed");
          return;
        }

        var newData = allData[dateKeys[currentIndex]];
        console.log("Updating to", dateKeys[currentIndex], newData); 

        
        for (var i = 0; i < chart.data.length; i++) {
          if (
            newData[i] &&
            chart.data[i].short_name === newData[i].short_name
          ) {
            chart.data[i].poin = newData[i].poin;
          } else {
            console.warn(
              "Mismatch in team order at index",
              i,
              chart.data[i],
              newData[i]
            );
          }
        }

        
        poinSeries.interpolationDuration = stepDuration;
        valueAxis.rangeChangeDuration = stepDuration;

        chart.invalidateRawData();
        year = dateKeys[currentIndex];
        label.text = year;

        document.getElementById("yearDiv").innerText = year;
        var leagues = newData.map((item) => item.league || "").join(" ");
        leagueLabel.text = leagues;
        document.getElementById("leagueDiv").innerText = leagues;

        var club1 = newData[0].short_name;
        var club2 = newData[1].short_name;
        var score1 = newData[0].score_komulatif;
        var score2 = newData[1].score_komulatif;

        if (score1 < score2) {
          [club1, club2] = [club2, club1];
          [score1, score2] = [score2, score1];
        }

        var scores = `
          <span style="color: ${labelMapping[club1]?.color || "#000"};">${club1}</span> 
          ${score1}:${score2} 
          <span style="color: ${labelMapping[club2]?.color || "#000"};">${club2}</span>
        `;

        scoreLabel.html = scores; 
        document.getElementById("scoreDiv").innerHTML = scores; 

        adjustZoomLevel(); 

        
        console.log("Year:", year);
        console.log("Chart Data:", chart.data);
      }

      categoryAxis.sortBySeries = poinSeries;

      
      chart.data = allData[dateKeys[0]].slice(0, 2).map((team) => ({
        short_name: team.short_name,
        poin: team.poin,
        score: team.score,
        league: allData[dateKeys[0]][2].league,
        clubs: allData[dateKeys[0]][2].clubs,
      }));
      categoryAxis.zoom({ start: 0, end: 1 });

      
      console.log("Initial Chart Data:", chart.data);

      
      chart.zoomOutButton.disabled = true;

      poinSeries.events.on("inited", function () {
        setTimeout(function () {
          play(); 
        }, 2000);
      });

      
      categoryAxis.events.on("datavalidated", function () {
        adjustZoomLevel();
      });

      
      var staticText = chart.plotContainer.createChild(am4core.Label);
      staticText.text = "yt:SINAU";
      staticText.fontSize = 20;
      staticText.align = "middle";
      staticText.valign = "middle";
      staticText.opacity = 0.2; 
      staticText.dx = 10;
      staticText.dy = 10;
      staticText.fill = am4core.color("#000000"); 

      
      
    });
  })
  .catch((error) => console.error("Error loading data:", error));

</script>

	
</div>
    



    

</body>
</html>